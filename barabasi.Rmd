---
title: "Barabasi Document"
output:
  pdf_document:
    toc: true
    highlight: zenburn
---

# Investigation of Barabasi Network

```{r setup}
library(igraph)
library(ggplot2)
library(data.table)

```

## Barabasi Graph

A Barabasi graph is generated as follows:

- generate a new node, $N$
- select an existing node, $E$, with a probability of selection proportional to the number of edges already connected to it
- create an edge to connect $N$ to $E$
- repeat for a number of times

```{r gen_graph}
g <- barabasi.game(20)
plot(g)
```
The graph thus created has the following properties:

- all nodes are connected to at least one other
- earlier nodes tend to have a higher degree (number of neighburs) than later nodes
- the more connected a node, the more likely it is to attract new nodes to connect to it


```{r graph_stats}
degree.distribution(g)
average.path.length(g)
```

```{r gen_series}
df <- data.frame(i=c(), a=c())
for (i in 2:1000) {
    g <- barabasi.game(i)
    a <- average.path.length(g)
    df <- rbind(df, data.frame(i=i, a=a))
}
```

```{r plot_series}
p <- ggplot(df, aes(x=log10(i), y=a))
p <- p + geom_point(alpha=0.2)
p <- p + geom_smooth()
p
```

```{r gen_degrees}
df <- data.frame(iteration=c(), degree=c(), prop=c())
for (i in 1:200) {
    g <- barabasi.game(100)
    p <- degree.distribution(g)
    d <- 1:length(p)
    tmp <- data.frame(iteration=i,
                      degree=d,
                      prop=p)
    df <- rbind(df, tmp)
}
```

```{r plot_degrees}
dt <- data.table(df)
setkey(dt, degree)
p <- ggplot(dt, aes(x=degree, 
                    y=prop,
                    group=iteration))
p <- p + geom_point(aes(colour=degree))
p <- p + geom_segment(aes(x=degree-0.4,
                          xend=degree+0.4,
                          y=prop,
                          yend=prop,
                          colour=degree)
                      )
p
```

```{r plot_average_degrees}
dt <- dt[,j=mean(prop),by=degree]
p <- ggplot(dt, aes(x=degree, 
                    y=V1)
            )
p <- p + geom_line()
p
```


